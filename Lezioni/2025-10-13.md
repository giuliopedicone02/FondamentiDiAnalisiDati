# Lunedì 13 ottobre 2025

# Descrivere e visualizzare i dati

Modo alternativo di rappresentare i dati (altri modi: lezione precedente).
Si basa sul concetto di probabilità e frequenze. Consideriamo la colonna dei pesi, che sono dei valori continui, se volessi visualizzarlo su frequenze relative otterrei un diagramma che non mi permette visualizzandolo una facile interpretazione, abbiamo del rumore, dei picchi e valori più bassi.

## Distribuzione Cumulativa Empirica (ECDF)

Invece di porci la domanda "qual è la frequenza del valore x?" Ci chiediamo "qual è la frequenza dei dati che hanno un valore inferiore ad x?" sommando i valori che lo precedono. 

Per prima cosa dovrò ordinare i valori ed ottenere in seguito la somma cumulativa (`.cumsum()`). Il primo elemento resta uguale a se stesso, il secondo elemento è la somma del primo ed il secondo, il terzo elemento è la somma del primo, del secondo e del terzo...

Ottengo così questa funzione monotona non decrescente:

$$
ECDF(x)=\sum_{a_j\leq x}f(a_j)
$$

Questa funzione non può essere letta alla stessa maniera della precedente, inoltre satura ad 1.
Posso interpretare il dato dicendo, guardando il grafico ad esempio che l'80% delle persone intervistate ha un peso inferiore a 42 libbre. O ancora se ci chiedessimo qual è la percentuale di persone che hanno un peso inferiore a 45 libbre? Otteniamo circa 85%. 

Possiamo confrontare la diswtribuzione dei pesi degli uomini con la distribuzione dei pesi delle donne, le due freuqienze sono simili il modo in cui la funzione cresce è simile.
Ad esempio l'80% delle donne ha un peso inferiore a 37, gli uomini di 45. L'area sotto la curva delle donne è maggiore rispetto a quella degli uomini.

## Istogrammi

Possiamo costruire un istogramma suddividendo i valori in "classi" tramite la funzione `.cut()` indicando quanti bins vogliamo suddivisi in intervalli uguali. Non esiste un numero ottimale di bins, è una forma di frequenza di campionamento. Un numero alto di bins crea un grafico con molto rumore. Potremmo anche passare un array invece del numero di bins in modo da stabilire noi il range desiderato di ogni classe.

```python
plt.figure(figsize=(12,6))
_,edges,_=plt.hist(weights, bins=[20,25,30,35,40,45,50,55,60,65]) # construct a histogram with defined bins
plt.xticks(edges)
plt.grid()
plt.show()
```

## Density Estimation

Tecnica non parametrica che permette di stimare la densità di una distribuzione, ci permette di avere una curva, una sorta di versione continua dell'istogramma più o meno precisa in base alla dimensione della band-width.

## Statistiche di Sommario (Summary Statistics)

Rappresentazioni più compatte di alcune tipologie di dati, è utile avere una serie di numeri detti summary statistics o statistiche descrittive che si articolano in:

- sample size
- indicatori centrali
- indicatori di dispersione

Consideriamo la colonna relativa alle età.

## Campione univariato

Si indica con ${x^{(i)}}_i^N$, un campione univariato è un campione di scalari, se fosse stato un campione di vettori l'avrei chiamato campione bivariato, in tutti gli altri casi multivariato. La cardinalità dell'insieme è $N$. Tramite il metodo `.info()` mi viene restituito il numero di campioni non nulli, la sua **dimensionalità**.

## Misure di Tendenza centrale

I dati seguono determinate tendenze, non incontriamo i dati tutti con la stessa frequenza, alcuni hanno più frequenza altri meno, le distribuzioni possono essere uni-modali se hanno un unico picco o bi-modali o multi-modali in base al numero di picchi.

La **media** si troverà più o meno dove avrò maggiore frequenza si indica con


$$
\bar{X} = \frac{1}{N}\sum_i^N x^{(i)}
$$

e si richiama con il metodo `age.mean()`, ignora i NaN. Numpy `np.array(age).mean()`, invece restituirebbe NaN. Nel nostro caso la media è più avanti rispetto al picco.

La **mediana** viene calcolata in maniera diversa dalla media. è quel valore che divide un campione ordinato in due sezioni uguali. Se il campione è di dimensione dispari si prende il valore centrale, se il campione ha dimensione pari si considera la media dei due valori centrali. Si richiama con `age.median()`. Anche in questo caso la mediana non corrisponde al picco, ma è più vicino rispetto alla media.

$$
\tilde x_{0.5} = \begin{cases}
x_{(n+1)/2} & \text{if } n \textit{ is odd}\\
    \frac{1}{2}(x_{n/2}+x_{n/2+1}) & \text{otherwise.}
\end{cases}
$$

## Quantili, Quartili e Percentili

Il **quantile** è una generalizzazione della mediana, la mediana è il quantile di ordine $\alpha=0.5$ le dimensioni saranno proporzionali ad $\alpha$ ed $1-\alpha$.
Il quantile di ordine 0 è il minimo, il quantile di ordine 1 è il massimo. Si indica con `age.quantile()`.

I **percentili** dividono il mio campione in 100 parti si indica con `age.quantile(25/100)`.

I **quartili** vanno ad identificare dei quantili specifici che sono abbastanza standard, ovvero quelli che dividono il campione in 4 parti:

- Quartile di ordine 0 che è il quantile di ordine 0
- Quartile di ordine 1 che è il quantile di ordine 1/4
- Quartile di ordine 2 che è il quantile di ordine 2/4 => Mediana
- Quartile di ordine 3 che è il quantile di ordine 3/4
- Quartile di ordine 4 che è il quantile di ordine 4/4

Le aree dei settori di curva comprese tra queste aree sono circa uguali

## Moda

Indica il valore che si ripete più volte

$$\overline x_M = a_j \Leftrightarrow n_j = \max\{n_1,\ldots,n_k\}$$

Non abbiamo garanzia che corrisponda al picco, ma in base alla misura della densità spesso tende a coincidere con il picco, nel nostro caso i due valori sono molto simili.

Queste misure di tendenza centrale ci dicono quali sono i centri della distribuzione, il "grosso" dei dati, ora ci tocca capire quanto la distribuzione è dispersa.

## Misure di dispersione

Vediamo il minimo, il massimo ed il range (differenza tra minimo e massimo). Sono misure sensibili agli outliers, valori "rari" oppure errori che non seguono molto bene la distribuzione

## Distanza Interquantile

Differenza tra terzo quartile (0.75) e primo quartile (0.25), più robusta rispetto alle misure di prima, se aggiungo un singolo valore a destra o un singolo valore a sinistra questo valore non subirà grossi cambiamenti.

## Varianza e Deviazione Standard

La varianza anche conosciuta come scarto quadratico medio è una misura che ci indica quanto i dati si discostano dalla media.

$$s^2 = \frac{\sum_{i=1}^n(x_i-\overline x)^2}{n}$$

Una varianza piccola indica che i valori sono tutti vicini alla media, una varianza grande indica che i valori si discostano molto dalla media. Leggermente più sensibile alla distanza interquartile rispetto agli outliers.

Il problema della deviazione standard è che restituisce una unità di misura che è il quadrato di quella che utilizziamo nel nostro caso anni^2 non ci aiuta molto. Esiste quindi la **deviazione standard** che è la radice della varianza.

La formula vista prima da una misura sovrastimata, meglio utilizzare lo stimatore "no-biased" o non distorto della varianza, identica alla precedente ma con n-1 al denominatore

$$s^2 = \frac{\sum_{i=1}^n(x_i-\overline x)^2}{n-1}$$

Se il mio campione è molto grande le due formule tenderanno allo stesso risultato, in caso di campioni più piccoli è sempre meglio utilizzare la seconda formula.

## Tecniche di normalizzazione dei dati

Modificano il range dei dati portandoli ad un range predefinito.

Ad esempio la normalizzazione tra 0 e 1 porta tutti i dati in una scala tra [0,1] dove il valore più piccolo viene mappato in 0 e il valore più grande viene mappato in 1

$$
x_{norm} = \frac{(x-x_{min})}{(x_{max}-x_{min})}
$$

Non è molto usata.

Esiste anche la normalizzazione compresa tra -1 ed 1 utilizzata spesso nel mondo delle reti neurali.

La normalizzazione che utilizziamo di più si chiama **z-scoring** o **standardizzazione** che si calcola con: 

$$
z_i = \frac{x_i-\overline x}{s_x}
$$

la media sarà 0 e la deviazione standard sarà 1.

Effettuare questa operazione è importante, ancora di più quando le distribuzioni che vogliamo confrontare hanno unità di misura differenti (come pesi ed altezze). Non esiste quindi una unità di misura.

## Indicatori di forma

Si relazionano alla distribuzione Gaussiana, questi indicatori cercano di riassumenre quanto una distribuzione devia dalla Gaussiana considerata "perfetta".

### Skewness

Indica la asimmetria, rispetto alla gaussiana ho una coda più lunga a destra o a sinistra?
Viene anche detto terzo momento del campione, restituisce un valore che è:

- Negativo se la distribuzione è assimetrica a sinistra (coda a sinistra molto lunga)
- Positivo se la distribuzione è asimmetrica a destra (coda a destra molto lunga)
- 0 o prossimo allo 0 se la distribuzione è simmetrica

### Kurtosis

Indica quanto le code della distribuzione sono "spesse" rapportate alla Gaussiana. In una Gaussiana le code tendono allo 0 con un certo andamento, in altre distribuzioni questo andamento è spesso differente.

- Se il valore è positivo, la distribuzione si dice leptokurtica indica code più spesse rispetto alla distribuzione normale, va a 0 troppo velocemente
- Se il valore è negativo, la distribuzione si dice platykurtica indica code più piatte rispetto alla distribuzione normale, va a 0 troppo lentamente
- Se il valore è 0 la distribuzione si idce mesokurtica, le code sono simili alla distribuzione normale

## Statistiche Riassuntive (Sommario Statistico)

In Python tramite il metodo `titanic.describe()` ci restituisce informazioni relative alle variabili numeriche presenti in esso quali:

- **counts**: numero di valori non mancanti
- **avg**: valore medio
- **std**: deviazione standard
- **min** e **max**: valori minimo e massimo
- **25%**, **50%**, **75%**: primo quartile (Q1), mediana (Q2) e terzo quartile (Q3)

## BoxPlot

Restituiscono una visualizzazione che mette in relazione:

- Valore mediano;
- Primo e terzo quartile;
- Minimo e massimo (a seconda della "versione" del boxplot, come discusso di seguito).

Ci aspettiamo che la maggior parte dei dati si trovi tra il primo ed il terzo quartile, i punti che si trovano oltre quel range li etichetto come outliers

Il boxplot è rappresentato come una “scatola” con dei “baffi”, in cui:

- il bordo inferiore della scatola indica il primo quartile;
- il bordo superiore della scatola indica il terzo quartile;
- la linea orizzontale al centro della scatola rappresenta il valore mediano del campione;
- il baffo inferiore rappresenta il primo valore del campione maggiore o uguale al primo quartile meno una volta e mezza la distanza tra il terzo e il primo quartile;
- il baffo superiore rappresenta il primo valore del campione minore o uguale al terzo quartile più una volta e mezza la distanza tra il terzo e il primo quartile;
- i punti rappresentano i valori “fuori dai limiti”, ossia quelli che cadono al di fuori dell’intervallo delimitato dai baffi. Essi sono generalmente considerati come “outlier”.
